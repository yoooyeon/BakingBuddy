<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" th:src="@{/js/recipe/recipe-list.js}"></script>
    <!-- css -->
    <div layout:fragment="css">
        <style>
            body {
                font-family: Arial, sans-serif;
                line-height: 1.6;
                color: #333;
                background-color: #f8f9fa;
                margin: 0;
                padding: 0;
            }

            .container {
                max-width: 80%;
                margin: 0 auto;
                padding: 20px;
            }

            .recipe-card {
                display: flex;
                flex-direction: column;
                margin-bottom: 20px;
                border: 1px solid #ddd;
                border-radius: 8px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                overflow: hidden;
                background-color: #fff;
                transition: box-shadow 0.3s ease, transform 0.3s ease;
                text-decoration: none;
                color: inherit;
            }

            .recipe-card:hover {
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
                transform: scale(1.02);
            }

            .recipe-card img {
                width: 100%;
                height: 200px;
                object-fit: cover;
                border-bottom: 2px solid #ddd;
            }

            .recipe-details {
                padding: 15px;
            }

            .recipe-details h5.card-title {
                font-size: 1.5rem;
                margin-bottom: 10px;
                font-weight: bold;
                color: #333;
            }

            .recipe-details p.card-text {
                color: #6c757d;
            }

            .recipe-details .meta-info {
                margin-top: 10px;
                font-size: 0.9rem;
            }

            .recipe-details .meta-info span {
                display: block;
                margin-bottom: 5px;
                font-weight: 600;
                color: #555;
            }

            .recipe-details .meta-info span span {
                font-weight: normal;
                color: #777;
            }

            #loading {
                text-align: center;
                margin-top: 20px;
                font-size: 1.2rem;
                color: #888;
            }

            /* Search styles */
            .search-container {
                position: relative;
                margin-bottom: 20px;
            }

            .search-input {
                width: 100%;
                padding: 10px;
                font-size: 16px;
                border-radius: 4px;
                border: 1px solid #ccc;
                box-sizing: border-box;
                background-color: #fff;
            }

            .autocomplete-results {
                position: absolute;
                top: 100%;
                left: 0;
                z-index: 1000;
                width: 100%;
                max-height: 300px;
                overflow-y: auto;
                border: 1px solid #ccc;
                background-color: #fff;
                border-radius: 4px;
            }

            .autocomplete-results ul {
                margin: 0;
                padding: 0;
                list-style: none;
            }

            .autocomplete-results li {
                padding: 10px;
                border-bottom: 1px solid #eee;
                cursor: pointer;
                display: flex;
                align-items: center;
            }

            .autocomplete-results li:hover {
                background-color: #f0f0f0;
            }

            .autocomplete-image {
                width: 60px;
                height: 60px;
                margin-right: 10px;
                object-fit: cover;
                border-radius: 4px;
            }

            .autocomplete-details {
                flex: 1;
            }

            @media (max-width: 768px) {
                .recipe-card img {
                    height: 150px;
                }
            }

            @media (min-width: 769px) {
                .recipe-card {
                    flex-direction: row;
                }

                .recipe-card img {
                    width: 40%;
                    height: auto;
                }

                .recipe-details {
                    width: 60%;
                }
            }

            .profile-image {
                width: 30px !important; /* 조정할 크기 */
                height: 30px !important; /* 조정할 크기 */
                object-fit: contain !important;
                border-radius: 10% !important;
                margin-left: 10px !important;
                margin-right: 10px !important;
            }

        </style>
    </div>
</head>
<body>
<div layout:fragment="content">

    <div th:if="${not #lists.isEmpty(recipes)}">
        <div class="container">

            <div class="row" id="recipe-container">
                <div class="col-12 mb-4" th:each="recipe : ${recipes}">
                    <a th:href="@{|/api/recipes/${recipe.id}|}" class="recipe-card"
                       th:attr="data-url=@{/api/recipes/{recipeId}(recipeId=${recipe.id})}">
                        <img th:src="${recipe.recipeImageUrl}" alt="Recipe Image">
                        <div class="recipe-details">
                            <h5 class="card-title" th:text="${recipe.name}">Recipe Name</h5>
                            <div>
                                <label class="label-large">작성자</label>
                                <div class="label-description">
                                    <img th:src="${recipe.profileImageUrl}" alt="User Profile" class="profile-image">
                                    <span th:text="${recipe.username}"></span>
                                </div>
                            </div>
                            <div class="meta-info">
                                <span>재료: <span th:each="ingredient : ${recipe.ingredients}"
                                                th:text="${ingredient.name}">Ingredient Name</span>
                                    <span th:if="${#lists.isEmpty(recipe.ingredients)}">재료가 없습니다.</span>
                                </span>
                                <span>태그: <span th:each="tag : ${recipe.tags}" th:text="${tag.name}">Tag Name</span>
                                    <span th:if="${#lists.isEmpty(recipe.tags)}">태그가 없습니다.</span>
                                </span>
                                <span>소요시간: <span th:text="${recipe.time}+'분'">Time</span></span>
                                <span>난이도: <span th:text="${recipe.level}">Difficulty</span></span>
                                <span>설명: <span th:text="${recipe.description}">Description</span></span>
                            </div>
                            <div class="recipe-steps">
                                <!-- <p class="card-text" th:text="${recipe.steps}">Recipe Steps</p> -->
                            </div>
                            <div class="card-footer">
                                <small class="text-muted">Last updated 3 mins ago</small>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div id="loading">
            <p>Loading more recipes...</p>
        </div>
    </div>

    <!-- 검색 결과가 없을 때 -->
    <div th:if="${#lists.isEmpty(recipes)}" class="text-center py-5">
        <p>검색 결과가 없습니다.</p>
    </div>
</div>
</body>
</html>
